# 正文

简要介绍 reST 的语法．

## 段落

空行即定义了段落的分离．值得注意的是，行首的空格不能随意使用（就像 Python 语法一样）；正常段落需要顶格书写．

## 行内标记

被行内标记的文本前后**不允许空白**，比如 `* text *` 是不允许的．

- **强调**：单星号 `*text*`，表现为加斜
- **重点强调**：双星号 `**text**`，表现为加粗
- **代码**：重音号，`` `text` ``，表现为等宽字体

## 标题

reST 的标题可以使用多种语法，主体要求是将符号作为“上下划线”写在标题上下两侧（或仅下侧），其长度需大于标题文字长、且上下等长．这里介绍 Python 风格文档的推荐：
```rest
#######
Part
#######

*********
Chapter
*********

Section
=========

Subsection
-------------

Subsubsection
^^^^^^^^^^^^^^^^^

Paragraph
"""""""""""""""
```

## 列表

**非编号列表**使用 `*`．嵌套的列表前后需要额外的空行．
```rest
* 1st
* 2nd

    * nested list

* 3rd
```

**编号列表**中，可以使用 `#` 来自动编号：
```rest
1. One
2. Two
#. Three
```

**定义列表**用来罗列定义和它们的解释，其中解释文本需要缩进：
```rest
术语1
    术语的解释必须缩进书写，

    可以分多段．

术语2
    解释
```

**字段列表**是一种记录字段“键值对”的块，键用一对冒号 `:` 包裹（这也是 Python 编程时函数文档的常用格式）．例子取自[这里](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#field-lists)：
```rest
:Date: 2001-08-16
:Version: 1
:Authors: - Me
          - Myself
          - I
:Indentation: Since the field marker may be quite long, the second
   and subsequent lines of the field body do not have to line up
   with the first line, but they must be indented relative to the
   field name marker, and they must line up with each other.
```

**选项列表**是一种介绍命令选项的列表，就像 CMD 命令行的帮助一样．例子取自[这里](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#option-lists)：
```rest
-a         Output all.
-b         Output both (this description is
           quite long).
-c arg     Output just arg.
--long     Output all day long.

-p         This option has two paragraphs in the description.
           This is the first.

           This is the second.  Blank lines may be omitted between
           options (as above) or left in (as here and below).

--very-long-option  A VMS-style option.  Note the adjustment for
                    the required two spaces.
```

## 块

**引用块**只需要比附近的段落额外缩进即可．

**代码块**首段用双冒号 `::` 结尾，块中需要缩进．
```rest
This is a code block::

    a = 3
    b = 4
    c = sqrt(a^2 + b^2)

Return to normal paragraph.
```
更优美的代码高亮，请参考“[指令](#指令)”一节的内容．

**文字引用块**是一种引用对话的块，首段用双冒号 `::` 结尾，后面每行可用 `>` 开头．例子取自[这里](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#quoted-literal-blocks)：
```rest
John Doe wrote::

>> Great idea!
>
> Why didn't I think of that?

You just did!  ;-)
```

**分行块**是一种提供断行方式的块：
```rest
| This is a
| sentence which is 
| split into multilines.
```

**文档测试块**是一种显示交互式 Python 运行结果的块．块后需要额外空行．
```rest
>>> 1 + 2
3

```

## 链接

首先是**网页外链**，形如：`` `text <http://example.org>_` ``，尖括号内的网址会被识别．

为了下面的内容，我们来介绍**链接目标**的概念．链接可以被定义为一个目标，便于多次使用．要引用链接目标时，在链接名（如果含空格，则用重音号包起）后加下划线 `_`；要定义链接目标，用双点号起行，并用下划线加链接名的方式指定链接目标，再后加冒号 `:` 加以定义：
```rest
Welcome to `my website`_．You can Emailme_ if you like.

.. _my website: http://example.org/
.. _Emailme: jerry@example.org
```

其次是**交叉引用链接**，用于文档内跳转；引用链接需要以下划线 `_` 开头.如果你在某标题的上方（紧挨着）定义了引用链接，那么可以用 `:ref:labelname` 进行访问：
```rest
.. _new-section

## Here is a new section

Click to visit :ref:`new-section`.
```

如果链接目标并不定义在上述的位置，你需要在引用时给出一个显示文字．例如：`:ref: A section <new-section>`．


## 角色

reST 的角色使用格式是：`` :rolename:`content` ``，常用的有：
- **emphasis, strong, literal**：即 `*content*`, `**content**` 与 `` `content` ``．
- **subscript, superscript**：下标与上标．
- **math**：行内数学模式．行间数学模式请使用下一节介绍的 **.. math::** 指令．
- **ref**：上一节提到的交叉引用链接．

## 指令

reST 的指令格式：`.. directivename::`，常用的有：
- **警告**：最常见的指令叫警告（admonition），预定义的有：attention, caution, danger, error, hint, important, note, tip, warning. 调用方式是：
    ```rest
    .. caution::
       This is a caution.
    ```

    如果需要自定义，可以使用：
    ```rest
    .. admonition:: title here
       :class: class name for CSS usage

       Text.
    ```

- **图像**：`.. image:: ex.png`
- **脚注**：`.. rubic:: Footnotes`，可以在文中使用自动编号的标签 `[#]_`．例子取自[这里](http://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html#footnotes)：
    ```rest
    Footnote 1 [#f1]_ and footnote 2 [#f2]_

    .. rubic:: Footnotes

    .. [#f1] First.
    .. [#f2] Second.
    ```
- **注记**：注记可以从所有文件中引用．
    ```rest
    Citation [Ref] is gloabl accessible [Cit].

    .. [Ref] First.
    .. [Cit] Second.
    ```
- **注释**：单行 `.. This is a comment.`，多行：
    ```rest
    ..
        Indented contents after double dots
        are comments.

        Mutli-paragraph comments.
    ```
- **代码**：以高亮 python 为例，常使用 `code-block` 指令，还可以配合其他角色：
    ```rest
    .. code-block:: python
        :caption: Caption before this block
        :name: A name can be refered using ":ref:"
        :linenos: 
        :emphasis-lines: 1, 4

        import numpy as np

        a = 3
        b = 4
        c = a + b
    ```
    另一个选择是 `literalinclude`，可以直接调用文件（并可指定输出哪些行），甚至用 `:diff:` 与另一个文件进行 diff：
    ```rest
    .. literalinclude:: example.py
        :lines: 1, 3-12, 23-
        :linenos:
    ```
- **数学**：行间数学公式．行内亦可使用该指令．用空行表示换行．角色 `:label:` 可以给公式自动编号．
    ```rest
    .. math::
        :label:

        a^2 + b^2 = c^2

        y = x^2 + \sqrt{x}
    ```
    如果想实现 LaTeX 中 align 环境的效果，使用 `&` 与 `\\` 即可：
    ```rest
    .. math::

        y &= (ax + b)^2 \\
          &= a^2 x^2 + 2abx + b^2
    ```
    要去除所有隐含的数学环境（比如上例中的 `\begin{align}`），使用 `:nowrap:` 角色．
- **术语**：如同 Gitbook 的术语表．
    ```rest
    .. glossary::

        term1
            Def

        term2
        term3
            Share this def
    ```

## 表格

reST 主要支持两种表格．第一种是**网格表**，表头与表体用 `=` 分割，交点使用 `+`．例子取自[这里](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#grid-tables)：
```rest
+------------------------+------------+----------+----------+
| Header row, column 1   | Header 2   | Header 3 | Header 4 |
| (header rows optional) |            |          |          |
+========================+============+==========+==========+
| body row 1, column 1   | column 2   | column 3 | column 4 |
+------------------------+------------+----------+----------+
| body row 2             | ...        | ...      |          |
+------------------------+------------+----------+----------+
```

第二种是**简表**，或三线表，只有 `=` 是必须的．例子取自[这里](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#simple-tables)：
```rest
=====  =====  ======
   Inputs     Output
------------  ------
  A      B    A or B
=====  =====  ======
False  False  False
True   False  True
False  True   True
True   True   True
=====  =====  ======
```

还有两种不常用的，分别是**CSV表**与**罗列表**．在此只给出两个例子（均来自[这里](http://docutils.sourceforge.net/docs/ref/rst/directives.html)）：
```rest
.. csv-table:: Frozen Delights!
   :header: "Treat", "Quantity", "Description"
   :widths: 15, 10, 30

   "Albatross", 2.99, "On a stick!"
   "Crunchy Frog", 1.49, "If we took the bones out, it wouldn't be
   crunchy, now would it?"
   "Gannet Ripple", 1.99, "On a stick!"
```

```rest
.. list-table:: Frozen Delights!
   :widths: 15 10 30
   :header-rows: 1

   * - Treat
     - Quantity
     - Description
   * - Albatross
     - 2.99
     - On a stick!
   * - Crunchy Frog
     - 1.49
     - If we took the bones out, it wouldn't be
       crunchy, now would it?
   * - Gannet Ripple
     - 1.99
     - On a stick!
```